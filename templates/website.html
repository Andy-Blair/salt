{% extends 'base.html' %}

{% block link %}
    {% load staticfiles %}
    <!-- font icon -->
    <link href="{% static 'css/elegant-icons-style.css' %}" rel="stylesheet" />
    <link href="{% static 'css/font-awesome.min.css' %}" rel="stylesheet" />
{% endblock %}

{% block main_content %}
    <h3>站点发布</h3>
    <hr>
    <table id="website_list"></table>
    <div id="toolbar" class="btn-group">
        <button class="button button-royal button-pill button-small" id="web_update" name="update" data-toggle="modal" data-target="">更新</button>
        <button class="button button-royal button-pill button-small" id="web_rollback" name="rollback" data-toggle="modal" data-target="">回退</button>
        <button class="button button-royal button-pill button-small" id="build" name="build" data-toggle="modal" data-target="">构建</button>
        <div class="modal fade" id="modal-rollback" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog" >
                <div class="modal-content form-horizontal">
                    <div class="modal-header">
                         <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    </div>

                    <div class="modal-body" style="background-color: white">
                        <div class="form-group">
                            <label for="tag" class="control-label col-sm-2">Server</label>
                            <div class="col-sm-10">
                                <table id="rollback_modal_table" class="table table-hover" style="border: 0 solid transparent !important;"  >
                                    <caption>
                                        <div style="height: 25px;text-align: left; vertical-align: middle;" >至少选择一个服务器</div>
                                    </caption>
                                    <tbody>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="tag" class="control-label col-sm-2">Tag</label>
                            <div class="col-sm-10">
                                    <select id="tag" class="form-control" name="tag_name" style="width: auto">
                                        <option>请选择</option>
                                    </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="com_message" class="control-label col-sm-2">Message</label>
                            <div class="col-sm-9"><textarea style="background-color: white" rows="10" id="com_message" class="form-control" readonly></textarea></div>
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                        <button id="roll_back" type="button" class="btn btn-primary" name="rollback">回退</button>
                    </div>
                </div>

            </div>

        </div>
        <div class="modal fade" id="modal-update" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog" style="max-width: 400px">
                <div class="modal-content form-horizontal">
                    <div class="modal-header">
                         <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    </div>

                    <div class="modal-body" style="background-color: white;margin: 0 auto;">
                        <table id="modal_table" class="table table-hover" style="border: 0 solid transparent !important;"  >
                            <caption>
                                <div style="height: 25px;text-align: center; vertical-align: middle;" >至少选择一个服务器</div>
                            </caption>
                            <tbody>
                            </tbody>
                        </table>

                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                        <button id="update" type="button" class="btn btn-primary update_modal" name="update">更新</button>
                    </div>
                </div>

            </div>
        </div>
        <div class="modal fade" id="modal-tag" role="dialog" aria-labelledby="modal-tag" aria-hidden="true">
            <div class="modal-dialog" >
                <div class="modal-content form-horizontal">
                    <div class="modal-header">
                         <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    </div>

                    <div class="modal-body" style="background-color: white">
                        <div class="form-group">
                            <label for="tag" class="control-label col-sm-2">Tag Name</label>
                            <div class="col-sm-10">
                                    <input id="tag_name" required class="form-control" style="max-width: 300px" name="tag_name">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="com_message" class="control-label col-sm-2">上线内容</label>
                            <div class="col-sm-9"><textarea required style="background-color: white" rows="8" id="tag_message" class="form-control"></textarea></div>
                        </div>
                        <div class="form-group hidden" id="depcon">
                            <label for="com_message" class="control-label col-sm-2" style="padding: 0;">重复构建原因</label>
                            <div class="col-sm-9"><textarea id="dep_con" required style="background-color: white" rows="5" class="form-control"></textarea></div>
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                        <button id="start_build" type="button" class="btn btn-primary" name="start_build">开始构建</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block javascript %}
    <script src="{% static 'js/bootstrap-table.js' %}"></script>
    <script src="{% static 'js/bootstrap-table-zh-CN.js' %}"></script>
    <script src="{% static 'js/website.js' %}"></script>
{% endblock %}
